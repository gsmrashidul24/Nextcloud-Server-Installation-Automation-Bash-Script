
#						 							CREATE CLOUDFLARE API
#				 	   							тШЕтШЕтШЕтШЕтШЕтШЕтШЕтШЕтШЕтШЕтШЕтШЕтШЕтШЕ


#					Create Api For Nextcloud + Cloudflared AUTO INSTALLER
#					*******************************************************

#															Created by Rasel-Tech
#									   Compatible with: Ubuntu 22.04 / 24.04
#										************************************



#	 Complete This Proccess Before Installing  NextCloud Server:
# 	*********************************************************

тШБя╕П Cloudflare API Token рждрзИрж░рж┐рж░ рж╕ржорзНржкрзВрж░рзНржг ржЧрж╛ржЗржб


ЁЯФ╣ рззя╕ПтГг Cloudflare Dashboard-ржП рж▓ржЧржЗржи ржХрж░рзЛ

ЁЯСЙ https://dash.cloudflare.com/login

рждрж╛рж░ржкрж░ рждрзЛржорж╛рж░ ржбрзЛржорзЗржЗржи (ржпрзЗржЯрж╛рж░ ржЬржирзНржп Nextcloud рж╕рж╛рж░рзНржнрж╛рж░ рждрзИрж░рж┐ ржХрж░ржЫрзЛ) рж╕рж┐рж▓рзЗржХрзНржЯ ржХрж░рзЛред


ЁЯФ╣ рзия╕ПтГг API Tokens ржкрзЗржЬрзЗ ржпрж╛ржУ

ЁЯФЧ рж▓рж┐ржВржХ:
ЁЯСЙ https://dash.cloudflare.com/profile/api-tokens

рждрж╛рж░ржкрж░ ржХрзНрж▓рж┐ржХ ржХрж░рзЛ тАЬCreate TokenтАЭ


ЁЯФ╣ рзйя╕ПтГг ржЯрзЗржоржкрзНрж▓рзЗржЯ ржмрж╛ржЫрж╛ржЗ ржХрж░рзЛ

> ржирж┐ржЪрзЗ тАЬCreate Custom TokenтАЭ ржирж┐рж░рзНржмрж╛ржЪржи ржХрж░рзЛ
(ржЯрзЗржоржкрзНрж▓рзЗржЯ ржирж╛ ржирж┐рзЯрзЗ Custom Token ржирж┐рж▓рзЗ рждрзБржорж┐ ржкрж╛рж░ржорж┐рж╢ржи ржирж┐ржЬрзЗ ржХрж╛рж╕рзНржЯржорж╛ржЗржЬ ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗ)


ЁЯФ╣ рзкя╕ПтГг Token ржПрж░ ржирж╛ржо ржжрж╛ржУ

ржпрзЗржоржи:
Nextcloud Auto Setup Token


ЁЯФ╣ рзля╕ПтГг Permissions (ржЕржирзБржорждрж┐) рж╕рзЗржЯ ржХрж░рзЛ

рж╕рзНржХрзНрж░рж┐ржкрзНржЯрзЗрж░ рждрж┐ржиржЯрж┐ ржХрж╛ржЬрзЗрж░ ржЬржирзНржп ржирж┐ржЪрзЗрж░ рзйржЯрж┐ ржкрж╛рж░ржорж┐рж╢ржи ржкрзНрж░рзЯрзЛржЬржи ЁЯСЗ

				ржХрж╛ржЬ							Cloudflare Permission							Access Level

ЁЯМА Tunnel рждрзИрж░рж┐		тЖТ		NextCloud Tunnel 			тЖТ				Edit	тЬЕ Edit

ЁЯМР DNS рж░рзЗржХрж░рзНржб рждрзИрж░рж┐	 	тЖТ			DNS								 тЖТ				   Edit	тЬЕ Edit

ЁЯФТ Origin SSL Cert ржЗрж╕рзНржпрзБ 	тЖТ	SSL and Certificates   	тЖТ		Edit	тЬЕ Edit


ЁЯСЙ ржПржЧрзБрж▓рзЛ ржпрзЛржЧ ржХрж░рждрзЗ:

1. тАЬPermissionsтАЭ рж╕рзЗржХрж╢ржирзЗ Add More ржХрзНрж▓рж┐ржХ ржХрж░рзЛ

2. ржПржХрзЗ ржПржХрзЗ ржЙржкрж░рзЗрж░ рждрж┐ржиржЯрж┐ ржкрж╛рж░ржорж┐рж╢ржи ржпрзЛржЧ ржХрж░рзЛ


ЁЯФ╣ рзмя╕ПтГг Zone Resources рж╕рж┐рж▓рзЗржХрзНржЯ ржХрж░рзЛ

> Token ржХрзЛржи ржбрзЛржорзЗржЗржирзЗрж░ ржЬржирзНржп ржХрж╛ржЬ ржХрж░ржмрзЗ рж╕рзЗржЯрж┐ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржХрж░рзЛ

Zone Resources тЖТ Include тЖТ Specific Zone тЖТ [рждрзЛржорж╛рж░ ржбрзЛржорзЗржЗржи]

(ржпрзЗржоржи: example.com)


ЁЯФ╣ рзня╕ПтГг IP Access Rules (Optional)

ржЪрж╛ржЗрж▓рзЗ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ IP ржерзЗржХрзЗ ржЯрзЛржХрзЗржи ржмрзНржпржмрж╣рж╛рж░ рж╕рзАржорж╛ржмржжрзНржз ржХрж░рждрзЗ ржкрж╛рж░рзЛ (ржирж╛ ржжрж┐рж▓рзЗ рж╕ржорж╕рзНржпрж╛ ржирзЗржЗ)ред


ЁЯФ╣ рзоя╕ПтГг Token рждрзИрж░рж┐ ржХрж░рзЛ

тЬЕ тАЬContinue to summaryтАЭ
тЬЕ тАЬCreate TokenтАЭ
рждрж╛рж╣рж▓рзЗ рждрзЛржорж╛рж░ ржЯрзЛржХрзЗржи ржжрзЗржЦрж╛ржмрзЗ тАФ ржПржХржмрж╛рж░ржЗ ржжрзЗржЦрж╛ ржпрж╛ржмрзЗ!

ЁЯСЙ ржПржЯрж╛ ржХржкрж┐ ржХрж░рзЗ рж░рж╛ржЦрзЛ (Notepad ржмрж╛ Password Manager-ржП)


ЁЯФ╣ рзпя╕ПтГг Zone ID ржХрзЛржерж╛рзЯ ржкрж╛ржмрзЗ

Cloudflare Dashboard тЖТ рждрзЛржорж╛рж░ ржбрзЛржорзЗржЗржи ржЦрзБрж▓рзЗ ржирж┐ржЪрзЗ тАЬAPI тЖТ Zone IDтАЭ ржЕржВрж╢рзЗ ржжрзЗржЦрж╛ ржпрж╛ржмрзЗред
(ржкрзНрж░рждрж┐ржЯрж┐ ржбрзЛржорзЗржЗржирзЗрж░ ржЖрж▓рж╛ржжрж╛ Zone ID ржерж╛ржХрзЗ)


тЬЕ ржлрж╛ржЗржирж╛рж▓ рж▓рж┐рж╕рзНржЯ: ржпрж╛ рждрзЛржорж╛ржХрзЗ рж╕рзНржХрзНрж░рж┐ржкрзНржЯрзЗ ржжрж┐рждрзЗ рж╣ржмрзЗ

тШЕCLOUDFLARE_API_TOKEN

тШЕCLOUDFLARE_ZONE_ID

тШЕDOMAIN


ЁЯза рж╕рж┐ржХрж┐ржЙрж░рж┐ржЯрж┐ ржЯрж┐ржкрж╕

Token-ржПрж░ Permission рж╕рзАржорж┐ржд рж░рж╛ржЦрзЛ (Edit ржЫрж╛рзЬрж╛ ржЖрж░ ржХрж┐ржЫрзБ ржжрж┐ржУ ржирж╛)ред

ржХржЦржирзЛржЗ Global API Key ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЛ ржирж╛ тЪая╕П

ржЯрзЛржХрзЗржи expire date рж░рж╛ржЦрждрзЗ ржкрж╛рж░рзЛ, ржпрзЗржоржи рзз ржмржЫрж░ ржкрж░ред

Server-ржП .env ржмрж╛ /root/.secrets ржлрж╛ржЗрж▓рзЗ рж╕ржВрж░ржХрзНрж╖ржг ржХрж░рзЛ, рж╕рж░рж╛рж╕рж░рж┐ рж╕рзНржХрзНрж░рж┐ржкрзНржЯрзЗ ржирзЯред

